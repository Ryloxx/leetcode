#
# @lc app=leetcode id=38 lang=python3
#
# [38] Count and Say
#
# https://leetcode.com/problems/count-and-say/description/
#
# algorithms
# Medium (48.75%)
# Likes:    2281
# Dislikes: 5030
# Total Accepted:    698.1K
# Total Submissions: 1.4M
# Testcase Example:  '1'
#
# The count-and-say sequence is a sequence of digit strings defined by the
# recursive formula:
#
#
# countAndSay(1) = "1"
# countAndSay(n) is the way you would "say" the digit string from
# countAndSay(n-1), which is then converted into a different digit string.
#
#
# To determine how you "say" a digit string, split it into the minimal number
# of substrings such that each substring contains exactly one unique digit.
# Then for each substring, say the number of digits, then say the digit.
# Finally, concatenate every said digit.
#
# For example, the saying and conversion for digit string "3322251":
#
# Given a positive integer n, return the n^th term of the count-and-say
# sequence.
#
#
# Example 1:
#
#
# Input: n = 1
# Output: "1"
# Explanation: This is the base case.
#
#
# Example 2:
#
#
# Input: n = 4
# Output: "1211"
# Explanation:
# countAndSay(1) = "1"
# countAndSay(2) = say "1" = one 1 = "11"
# countAndSay(3) = say "11" = two 1's = "21"
# countAndSay(4) = say "21" = one 2 + one 1 = "12" + "11" = "1211"
#
#
#
# Constraints:
#
#
# 1 <= n <= 30
#
#
#
from algo_input import run
from types import MethodType


# @lc code=start
class Solution:

    def countAndSay(self, n: int) -> str:
        res = "1"
        for i in range(n - 1):
            curr = []
            for i in res:
                if not curr or curr[-1][0] != i:
                    curr.append([i, 1])
                    continue
                curr[-1][1] += 1
            res = "".join(str(y) + x for x, y in curr)
        return res


# @lc code=end
if __name__ == "__main__":
    run(
        MethodType(Solution.countAndSay, Solution()),
        [
            ([4], "1211"),
            ([1], "1"),
            ([30], "311311222113111231133211121312211231131112311"
             "211133112111312211213211312111322211231131122"
             "111213122112311311222112111331121113112221121"
             "113122113121113222112132113213221232112111312"
             "111213322112311311222113111221221113122112132"
             "113121113222112311311222113111231133221121113"
             "311211131122211211131221131112311332211211131"
             "221131211132221232112111312111213322112132113"
             "213221133112132113221321123113213221121113122"
             "123211211131221222112112322211231131122211311"
             "123113321112132132112211131221131211132221121"
             "321132132212321121113121112133221123113112221"
             "131112311332111213122112311311123112112322211"
             "211133112111311222112111312211311123113322112"
             "111312211312111322111213122112311311123112112"
             "322211211131221131211132221232112111312111213"
             "111213211231132132211211131221232112111312212"
             "221121123222112132113213221133112132123123112"
             "111311222112132113213221132213211321322112311"
             "311222113311213212322211211131221131211221321"
             "123113213221121113122113121132211332113221122"
             "112133221123113112221131112311332111213122112"
             "311311123112111331121113122112132113121113222"
             "112311311221112131221123113112221121113311211"
             "131122211211131221131211132221121321132122311"
             "211131122211213211321322113312221131122112211"
             "131221131211132221232112111312111213111213211"
             "231132132211211131221232112111312212221121123"
             "222112132113213221133112132123123112111311222"
             "112132113213221132213211321322112311311222113"
             "311213212322211211131221131211221321123113213"
             "221121113122113121132211332113221122112133221"
             "121321132132211331121321231231121113112221121"
             "321133112132112312321123113112221121113122113"
             "111231133221121321132122311211131122211213211"
             "321322112312321123113213221123113112221131112"
             "311332211211131221131211132211121312211231131"
             "112311211232221121321132132211331221122311311"
             "222112111312211311123113322112132113213221133"
             "122211332111213112221133211322112211213322112"
             "311311222113111231133211121312211231131112311"
             "211133112111312211213211312111322211231131122"
             "111213122112311311222112111331121113112221121"
             "113122113121113222112132113213221232112111312"
             "111213322112311311222113111231133211121312211"
             "231131112311211232221132231131122211311123113"
             "321112131221123113111231121123222112111312211"
             "312111322212321121113122113221113122112132113"
             "121113222112311311221112131221123113112211322"
             "112211213322112132113213221133112132123123112"
             "111312111312212231131122211311123113322112111"
             "312211312111322111213122112311311123112112322"
             "211213211321322113311213212312311211131221132"
             "231121113311211131221121321131112311322311211"
             "132132212312211322212221121123222112111312211"
             "312111322212321121113121112131112132112311321"
             "322112111312212321121113122112131112131221121"
             "321132132211231131122211331121321232221121113"
             "122113121122132112311321322112111312211312111"
             "322211213111213122112132113121113222112132113"
             "213221133112132123222112311311222113111231132"
             "231121113112221121321133112132112211213322112"
             "111312211312111322212311222122132113213221123"
             "113112221133112132123222112111312211312111322"
             "212321121113121112133221121311121312211213211"
             "312111322211213211321322123211211131211121332"
             "211213211321322113311213212312311211131122211"
             "213211331121321122112133221123113112221131112"
             "311332111213122112311311222113223113112221121"
             "113122113111231133221121321132122311211131122"
             "211213211321222113222122211211232221121113122"
             "113121113222123211211131211121311121321123113"
             "111231131122112213211321322113311213212322211"
             "231131122211311123113223112111311222112132113"
             "311213211221121332211211131221131211132221232"
             "112111312111213111213211231132132211211"
             "1312212321121113122122211211232221121311121"
             "312211213211312111322211213211321322123211211"
             "1312111213322112132113213221133112132113221"
             "321123113213221121113122123211211131221222112"
             "1123222112132113213221133112132123123112111"
             "311222112132113311213211231232112311311222112"
             "1113122113111231133221121321132122311211131"
             "122211213211321222113222122211211232221123113"
             "112221131112311332111213122112311311123112111331121"
             "113122112132113121113222112311311221112131221"
             "1231131122211211133112111311222112111312211"
             "312111322211213211321322123211211131211121332"
             "2112311311222113111231133211121321321122111"
             "312211312111322211213211321322123211211131211"
             "121332211213211321322113311213212312311211131"
             "221132231121113311211131"
             "221222112112322211213211321322113311213212322"
             "2113223113112221131112311332111213122112311"
             "311123112112322211211131221131211132221232112"
             "1113121112131112132112311321322112111312211"
             "312112213211231132132211231131122211311122113"
             "2221232221123113112221132211131221131211132"
             "221121321132132211331121321133112111312212221"
             "1211132213211231131122212322211331222113112211"),
        ],
    )
